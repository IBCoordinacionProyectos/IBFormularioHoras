{"ast":null,"code":"import React,{useState}from'react';import{Toaster}from'sonner';import{BrowserRouter as Router,Routes,Route,Navigate,useNavigate}from'react-router-dom';// Application components\nimport FormularioHoras from'./components/FormularioHoras';import FormularioPermisos from'./components/FormularioPermisos';import LoginPage from'./components/LoginPage';import PowerBIPage from'./components/PowerBIPage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Wrapper component for FormularioHoras that provides navigation\nconst FormularioHorasWrapper=_ref=>{let{onSuccess,employeeId,employeeName,onLogout,onShowPowerBI}=_ref;const navigate=useNavigate();return/*#__PURE__*/_jsx(FormularioHoras,{onSuccess:onSuccess,employeeId:employeeId,employeeName:employeeName,onLogout:onLogout,onShowPowerBI:onShowPowerBI,onNavigateToHours:()=>navigate('/horas'),onNavigateToPermissions:()=>navigate('/permisos')});};// Wrapper component for FormularioPermisos that provides navigation\nconst FormularioPermisosWrapper=_ref2=>{let{onSuccess,employeeId,employeeName,onLogout,onShowPowerBI}=_ref2;const navigate=useNavigate();return/*#__PURE__*/_jsx(FormularioPermisos,{onSuccess:onSuccess,employeeId:employeeId,employeeName:employeeName,onLogout:onLogout,onShowPowerBI:onShowPowerBI,onNavigateToHours:()=>navigate('/horas')});};function App(){const[authenticatedUser,setAuthenticatedUser]=useState(()=>{// Comprueba la variable de entorno para saltar el login en modo de desarrollo.\nif(process.env.REACT_APP_SKIP_LOGIN==='true'){return{id:999,name:'Usuario de Desarrollo'};// Usuario de prueba\n}return null;});const[showPowerBI,setShowPowerBI]=useState(false);const handleLoginSuccess=userData=>{setAuthenticatedUser({id:userData.employee_id,name:userData.employee_name});};const handleLogout=()=>{setAuthenticatedUser(null);};const handleSuccess=()=>{console.log(\"Operation successful, summary update might be needed.\");};const handleShowPowerBI=()=>{setShowPowerBI(true);};const handleHidePowerBI=()=>{setShowPowerBI(false);};// If showing Power BI page, render it exclusively\nif(showPowerBI&&authenticatedUser){return/*#__PURE__*/_jsx(PowerBIPage,{onBack:handleHidePowerBI});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background text-foreground flex flex-col\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",richColors:true}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 w-full\",children:!authenticatedUser?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-md p-4\",children:/*#__PURE__*/_jsx(LoginPage,{onLoginSuccess:handleLoginSuccess})})}):/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/horas\",element:/*#__PURE__*/_jsx(FormularioHorasWrapper,{onSuccess:handleSuccess,employeeId:authenticatedUser.id,employeeName:authenticatedUser.name,onLogout:handleLogout,onShowPowerBI:handleShowPowerBI})}),/*#__PURE__*/_jsx(Route,{path:\"/permisos\",element:/*#__PURE__*/_jsx(FormularioPermisosWrapper,{onSuccess:handleSuccess,employeeId:authenticatedUser.id,employeeName:authenticatedUser.name,onLogout:handleLogout,onShowPowerBI:handleShowPowerBI})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/horas\",replace:true})})]})})]})});}export default App;","map":{"version":3,"names":["React","useState","Toaster","BrowserRouter","Router","Routes","Route","Navigate","useNavigate","FormularioHoras","FormularioPermisos","LoginPage","PowerBIPage","jsx","_jsx","jsxs","_jsxs","FormularioHorasWrapper","_ref","onSuccess","employeeId","employeeName","onLogout","onShowPowerBI","navigate","onNavigateToHours","onNavigateToPermissions","FormularioPermisosWrapper","_ref2","App","authenticatedUser","setAuthenticatedUser","process","env","REACT_APP_SKIP_LOGIN","id","name","showPowerBI","setShowPowerBI","handleLoginSuccess","userData","employee_id","employee_name","handleLogout","handleSuccess","console","log","handleShowPowerBI","handleHidePowerBI","onBack","children","className","position","richColors","onLoginSuccess","path","element","to","replace"],"sources":["D:/formulario de horas/FormularioHoras Version 1/frontend/src/App.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Toaster } from 'sonner';\nimport { BrowserRouter as Router, Routes, Route, Navigate, useNavigate } from 'react-router-dom';\n\n// Application components\nimport FormularioHoras from './components/FormularioHoras';\nimport FormularioPermisos from './components/FormularioPermisos';\nimport LoginPage from './components/LoginPage';\nimport PowerBIPage from './components/PowerBIPage';\n\ninterface AuthenticatedUser {\n  id: number;\n  name: string;\n}\n\n// Wrapper component for FormularioHoras that provides navigation\nconst FormularioHorasWrapper: React.FC<{\n  onSuccess: () => void;\n  employeeId: number;\n  employeeName: string;\n  onLogout: () => void;\n  onShowPowerBI: () => void;\n}> = ({ onSuccess, employeeId, employeeName, onLogout, onShowPowerBI }) => {\n  const navigate = useNavigate();\n  \n  return (\n    <FormularioHoras\n      onSuccess={onSuccess}\n      employeeId={employeeId}\n      employeeName={employeeName}\n      onLogout={onLogout}\n      onShowPowerBI={onShowPowerBI}\n      onNavigateToHours={() => navigate('/horas')}\n      onNavigateToPermissions={() => navigate('/permisos')}\n    />\n  );\n};\n\n// Wrapper component for FormularioPermisos that provides navigation\nconst FormularioPermisosWrapper: React.FC<{\n  onSuccess: () => void;\n  employeeId: number;\n  employeeName: string;\n  onLogout: () => void;\n  onShowPowerBI: () => void;\n}> = ({ onSuccess, employeeId, employeeName, onLogout, onShowPowerBI }) => {\n  const navigate = useNavigate();\n  \n  return (\n    <FormularioPermisos\n      onSuccess={onSuccess}\n      employeeId={employeeId}\n      employeeName={employeeName}\n      onLogout={onLogout}\n      onShowPowerBI={onShowPowerBI}\n      onNavigateToHours={() => navigate('/horas')}\n    />\n  );\n};\n\nfunction App() {\n const [authenticatedUser, setAuthenticatedUser] = useState<AuthenticatedUser | null>(() => {\n    // Comprueba la variable de entorno para saltar el login en modo de desarrollo.\n    if (process.env.REACT_APP_SKIP_LOGIN === 'true') {\n      return { id: 999, name: 'Usuario de Desarrollo' }; // Usuario de prueba\n    }\n    return null;\n  });\n  \n  const [showPowerBI, setShowPowerBI] = useState(false);\n\n  const handleLoginSuccess = (userData: { employee_id: number; employee_name: string }) => {\n    setAuthenticatedUser({ \n      id: userData.employee_id, \n      name: userData.employee_name \n    });\n  };\n\n  const handleLogout = () => {\n    setAuthenticatedUser(null);\n  };\n\n const handleSuccess = () => {\n    console.log(\"Operation successful, summary update might be needed.\");\n  };\n\n  const handleShowPowerBI = () => {\n    setShowPowerBI(true);\n  };\n\n  const handleHidePowerBI = () => {\n    setShowPowerBI(false);\n  };\n\n  // If showing Power BI page, render it exclusively\n  if (showPowerBI && authenticatedUser) {\n    return <PowerBIPage onBack={handleHidePowerBI} />;\n  }\n\n  return (\n    <Router>\n      <div className=\"min-h-screen bg-background text-foreground flex flex-col\">\n        <Toaster position=\"top-right\" richColors />\n        \n        <main className=\"flex-1 w-full\">\n          {!authenticatedUser ? (\n            <div className=\"flex items-center justify-center h-screen\">\n              <div className=\"w-full max-w-md p-4\">\n                <LoginPage onLoginSuccess={handleLoginSuccess} />\n              </div>\n            </div>\n          ) : (\n            <Routes>\n              <Route \n                path=\"/horas\" \n                element={\n                  <FormularioHorasWrapper\n                    onSuccess={handleSuccess}\n                    employeeId={authenticatedUser.id}\n                    employeeName={authenticatedUser.name}\n                    onLogout={handleLogout}\n                    onShowPowerBI={handleShowPowerBI}\n                  />\n                } \n              />\n              <Route \n                path=\"/permisos\" \n                element={\n                  <FormularioPermisosWrapper\n                    onSuccess={handleSuccess}\n                    employeeId={authenticatedUser.id}\n                    employeeName={authenticatedUser.name}\n                    onLogout={handleLogout}\n                    onShowPowerBI={handleShowPowerBI}\n                  />\n                } \n              />\n              <Route \n                path=\"/\" \n                element={<Navigate to=\"/horas\" replace />} \n              />\n            </Routes>\n          )}\n        </main>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}