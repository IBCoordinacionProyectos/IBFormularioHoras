{"ast":null,"code":"// src/api/horasApi.ts\nimport axios from 'axios';\nconst API_BASE_URL = 'http://backend.yeisonduque.top';\nexport const submitHours = async data => {\n  try {\n    // üöÄ Cambio m√≠nimo: si viene id -> PUT /hours/{id}, si no -> POST /hours/\n    const {\n      id,\n      ...payload\n    } = data !== null && data !== void 0 ? data : {};\n    if (id != null && id !== undefined) {\n      const response = await axios.put(`${API_BASE_URL}/hours/${id}`, payload);\n      return response.data;\n    } else {\n      const response = await axios.post(`${API_BASE_URL}/hours/`, data);\n      return response.data;\n    }\n  } catch (error) {\n    console.error('Error al enviar/actualizar las horas:', error);\n    throw error;\n  }\n};\nexport const getProjects = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/projects/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener proyectos:', error);\n    throw error;\n  }\n};\nexport const getEmployees = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/employees/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener empleados:', error);\n    throw error;\n  }\n};\nexport const getDisciplinesByStage = async (projectCode, stage) => {\n  try {\n    const params = [encodeURIComponent(projectCode), encodeURIComponent(stage)].join('::');\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/disciplines`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener disciplinas para el proyecto ${projectCode}, etapa ${stage}:`, error);\n    throw error;\n  }\n};\nexport const getActivitiesByDiscipline = async (projectCode, stage, discipline) => {\n  try {\n    const params = [encodeURIComponent(projectCode), encodeURIComponent(stage), encodeURIComponent(discipline)].join('::');\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/activities`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener actividades para el proyecto ${projectCode}, etapa ${stage}, disciplina ${discipline}:`, error);\n    throw error;\n  }\n};\nexport const getDailyActivities = async (date, employeeId) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/daily-activities`, {\n      params: {\n        date,\n        employee_id: employeeId\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching daily activities:', error);\n    throw error;\n  }\n};\nexport const getProjectStages = async projectCode => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    // Usa el endpoint en activities\n    const response = await axios.get(`${API_BASE_URL}/activities/project/${encodedProjectCode}/stages`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener etapas para el proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\nexport const updateHour = async (hourId, data) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/hours/${hourId}`, data);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al actualizar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\nexport const deleteHour = async hourId => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/hours/${hourId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al eliminar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\nexport const getProjectByCode = async projectCode => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    const response = await axios.get(`${API_BASE_URL}/projects/${encodedProjectCode}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\nexport const loginUser = async credentials => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/login`, credentials);\n    return response.data;\n  } catch (error) {\n    console.error('Error en el inicio de sesi√≥n:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","submitHours","data","id","payload","undefined","response","put","post","error","console","getProjects","get","getEmployees","getDisciplinesByStage","projectCode","stage","params","encodeURIComponent","join","getActivitiesByDiscipline","discipline","getDailyActivities","date","employeeId","employee_id","getProjectStages","encodedProjectCode","updateHour","hourId","deleteHour","delete","getProjectByCode","loginUser","credentials"],"sources":["D:/formulario de horas/FormularioHoras Version 1/frontend/src/api/horasApi.ts"],"sourcesContent":["// src/api/horasApi.ts\nimport axios from 'axios';\n\nconst API_BASE_URL = 'http://backend.yeisonduque.top';\n\nexport const submitHours = async (data: any) => {\n  try {\n    // üöÄ Cambio m√≠nimo: si viene id -> PUT /hours/{id}, si no -> POST /hours/\n    const { id, ...payload } = data ?? {};\n    if (id != null && id !== undefined) {\n      const response = await axios.put(`${API_BASE_URL}/hours/${id}`, payload);\n      return response.data;\n    } else {\n      const response = await axios.post(`${API_BASE_URL}/hours/`, data);\n      return response.data;\n    }\n  } catch (error) {\n    console.error('Error al enviar/actualizar las horas:', error);\n    throw error;\n  }\n};\n\nexport const getProjects = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/projects/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener proyectos:', error);\n    throw error;\n  }\n};\n\nexport const getEmployees = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/employees/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener empleados:', error);\n    throw error;\n  }\n};\n\nexport const getDisciplinesByStage = async (projectCode: string, stage: string) => {\n  try {\n    const params = [encodeURIComponent(projectCode), encodeURIComponent(stage)].join('::');\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/disciplines`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener disciplinas para el proyecto ${projectCode}, etapa ${stage}:`, error);\n    throw error;\n  }\n};\n\nexport const getActivitiesByDiscipline = async (\n  projectCode: string,\n  stage: string,\n  discipline: string\n) => {\n  try {\n    const params = [\n      encodeURIComponent(projectCode),\n      encodeURIComponent(stage),\n      encodeURIComponent(discipline),\n    ].join('::');\n\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/activities`);\n    return response.data;\n  } catch (error) {\n    console.error(\n      `Error al obtener actividades para el proyecto ${projectCode}, etapa ${stage}, disciplina ${discipline}:`,\n      error\n    );\n    throw error;\n  }\n};\n\nexport const getDailyActivities = async (date: string, employeeId: number) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/daily-activities`, {\n      params: { date, employee_id: employeeId },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching daily activities:', error);\n    throw error;\n  }\n};\n\nexport const getProjectStages = async (projectCode: string) => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    // Usa el endpoint en activities\n    const response = await axios.get(\n      `${API_BASE_URL}/activities/project/${encodedProjectCode}/stages`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener etapas para el proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\n\nexport const updateHour = async (hourId: number, data: any) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/hours/${hourId}`, data);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al actualizar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\n\nexport const deleteHour = async (hourId: number) => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/hours/${hourId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al eliminar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\n\nexport const getProjectByCode = async (projectCode: string) => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    const response = await axios.get(`${API_BASE_URL}/projects/${encodedProjectCode}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\n\nexport const loginUser = async (credentials: any) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/login`, credentials);\n    return response.data;\n  } catch (error) {\n    console.error('Error en el inicio de sesi√≥n:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}