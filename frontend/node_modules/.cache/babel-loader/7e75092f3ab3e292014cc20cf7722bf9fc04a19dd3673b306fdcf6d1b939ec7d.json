{"ast":null,"code":"// src/api/horasApi.ts\nimport axios from 'axios';\nconst API_BASE_URL = 'http://backend.yeisonduque.top';\nexport const submitHours = async data => {\n  try {\n    const {\n      id,\n      ...payload\n    } = data;\n\n    // Asegurarse de que los campos numéricos sean números\n    if (payload.hours) {\n      payload.hours = Number(payload.hours);\n    }\n    if (payload.employee_id) {\n      payload.employee_id = Number(payload.employee_id);\n    }\n    if (id) {\n      // Para actualización, usamos la función updateHour existente\n      return await updateHour(id, payload);\n    } else {\n      // Para creación\n      const response = await axios.post(`${API_BASE_URL}/hours/`, payload);\n      return response.data;\n    }\n  } catch (error) {\n    console.error('Error al enviar/actualizar las horas:', error);\n    throw error;\n  }\n};\nexport const getProjects = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/projects/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener proyectos:', error);\n    throw error;\n  }\n};\nexport const getEmployees = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/employees/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener empleados:', error);\n    throw error;\n  }\n};\nexport const getDisciplinesByStage = async (projectCode, stage) => {\n  try {\n    const params = [encodeURIComponent(projectCode), encodeURIComponent(stage)].join('::');\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/disciplines`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener disciplinas para el proyecto ${projectCode}, etapa ${stage}:`, error);\n    throw error;\n  }\n};\nexport const getActivitiesByDiscipline = async (projectCode, stage, discipline) => {\n  try {\n    const params = [encodeURIComponent(projectCode), encodeURIComponent(stage), encodeURIComponent(discipline)].join('::');\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/activities`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener actividades para el proyecto ${projectCode}, etapa ${stage}, disciplina ${discipline}:`, error);\n    throw error;\n  }\n};\nexport const getDailyActivities = async (date, employeeId) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/daily-activities`, {\n      params: {\n        date,\n        employee_id: employeeId\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching daily activities:', error);\n    throw error;\n  }\n};\nexport const getProjectStages = async projectCode => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    // Usa el endpoint en activities\n    const response = await axios.get(`${API_BASE_URL}/activities/project/${encodedProjectCode}/stages`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener etapas para el proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\nexport const updateHour = async (hourId, data) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/hours/${hourId}`, data);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al actualizar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\nexport const deleteHour = async hourId => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/hours/${hourId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al eliminar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\nexport const getProjectByCode = async projectCode => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    const response = await axios.get(`${API_BASE_URL}/projects/${encodedProjectCode}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\nexport const loginUser = async credentials => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/login`, credentials);\n    return response.data;\n  } catch (error) {\n    console.error('Error en el inicio de sesión:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","submitHours","data","id","payload","hours","Number","employee_id","updateHour","response","post","error","console","getProjects","get","getEmployees","getDisciplinesByStage","projectCode","stage","params","encodeURIComponent","join","getActivitiesByDiscipline","discipline","getDailyActivities","date","employeeId","getProjectStages","encodedProjectCode","hourId","put","deleteHour","delete","getProjectByCode","loginUser","credentials"],"sources":["D:/formulario de horas/FormularioHoras Version 1/frontend/src/api/horasApi.ts"],"sourcesContent":["// src/api/horasApi.ts\nimport axios from 'axios';\n\nconst API_BASE_URL = 'http://backend.yeisonduque.top';\n\nexport const submitHours = async (data: any) => {\n  try {\n    const { id, ...payload } = data;\n    \n    // Asegurarse de que los campos numéricos sean números\n    if (payload.hours) {\n      payload.hours = Number(payload.hours);\n    }\n    if (payload.employee_id) {\n      payload.employee_id = Number(payload.employee_id);\n    }\n\n    if (id) {\n      // Para actualización, usamos la función updateHour existente\n      return await updateHour(id, payload);\n    } else {\n      // Para creación\n      const response = await axios.post(`${API_BASE_URL}/hours/`, payload);\n      return response.data;\n    }\n  } catch (error) {\n    console.error('Error al enviar/actualizar las horas:', error);\n    throw error;\n  }\n};\n\nexport const getProjects = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/projects/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener proyectos:', error);\n    throw error;\n  }\n};\n\nexport const getEmployees = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/employees/`);\n    return response.data;\n  } catch (error) {\n    console.error('Error al obtener empleados:', error);\n    throw error;\n  }\n};\n\nexport const getDisciplinesByStage = async (projectCode: string, stage: string) => {\n  try {\n    const params = [encodeURIComponent(projectCode), encodeURIComponent(stage)].join('::');\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/disciplines`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener disciplinas para el proyecto ${projectCode}, etapa ${stage}:`, error);\n    throw error;\n  }\n};\n\nexport const getActivitiesByDiscipline = async (\n  projectCode: string,\n  stage: string,\n  discipline: string\n) => {\n  try {\n    const params = [\n      encodeURIComponent(projectCode),\n      encodeURIComponent(stage),\n      encodeURIComponent(discipline),\n    ].join('::');\n\n    const response = await axios.get(`${API_BASE_URL}/activities/${params}/activities`);\n    return response.data;\n  } catch (error) {\n    console.error(\n      `Error al obtener actividades para el proyecto ${projectCode}, etapa ${stage}, disciplina ${discipline}:`,\n      error\n    );\n    throw error;\n  }\n};\n\nexport const getDailyActivities = async (date: string, employeeId: number) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/daily-activities`, {\n      params: { date, employee_id: employeeId },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching daily activities:', error);\n    throw error;\n  }\n};\n\nexport const getProjectStages = async (projectCode: string) => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    // Usa el endpoint en activities\n    const response = await axios.get(\n      `${API_BASE_URL}/activities/project/${encodedProjectCode}/stages`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener etapas para el proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\n\nexport const updateHour = async (hourId: number, data: any) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/hours/${hourId}`, data);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al actualizar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\n\nexport const deleteHour = async (hourId: number) => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/hours/${hourId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al eliminar el registro de horas ${hourId}:`, error);\n    throw error;\n  }\n};\n\nexport const getProjectByCode = async (projectCode: string) => {\n  try {\n    const encodedProjectCode = encodeURIComponent(projectCode);\n    const response = await axios.get(`${API_BASE_URL}/projects/${encodedProjectCode}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener proyecto ${projectCode}:`, error);\n    throw error;\n  }\n};\n\nexport const loginUser = async (credentials: any) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/login`, credentials);\n    return response.data;\n  } catch (error) {\n    console.error('Error en el inicio de sesión:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}